{
    "sourceFile": "src/core/page/SearchPage/index.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1643619190405,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1643619218137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,8 +81,9 @@\n             Save on your medications today!\r\n           </h1>\r\n \r\n           <div className=\"search-page__input-wrapper\">\r\n+            <AutoSuggestInput autocomplete={search.length >= 3 && group === false ? state : []} />\r\n           <InputField\r\n               iconUrl={SearchIconSvg}\r\n               value={search}\r\n               placeholder=\"Search Medications\"\r\n"
                },
                {
                    "date": 1643619893100,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,9 @@\n             Save on your medications today!\r\n           </h1>\r\n \r\n           <div className=\"search-page__input-wrapper\">\r\n-            <AutoSuggestInput autocomplete={search.length >= 3 && group === false ? state : []} />\r\n+            <AutoSuggestInput autocomplete={stae} />\r\n           <InputField\r\n               iconUrl={SearchIconSvg}\r\n               value={search}\r\n               placeholder=\"Search Medications\"\r\n"
                },
                {
                    "date": 1643620645191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,8 @@\n             Save on your medications today!\r\n           </h1>\r\n \r\n           <div className=\"search-page__input-wrapper\">\r\n-            <AutoSuggestInput autocomplete={stae} />\r\n           <InputField\r\n               iconUrl={SearchIconSvg}\r\n               value={search}\r\n               placeholder=\"Search Medications\"\r\n"
                },
                {
                    "date": 1643623964658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,8 +81,9 @@\n             Save on your medications today!\r\n           </h1>\r\n \r\n           <div className=\"search-page__input-wrapper\">\r\n+            <AutoSuggestInput autocomplete={state} />\r\n           <InputField\r\n               iconUrl={SearchIconSvg}\r\n               value={search}\r\n               placeholder=\"Search Medications\"\r\n"
                }
            ],
            "date": 1643619190405,
            "name": "Commit-0",
            "content": "import React, {useState, useEffect, useCallback} from \"react\";\r\nimport { Footer, InputField } from \"../../components\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport TopMed from \"../../store/topMed/action\";\r\nimport SearchZip from \"../../store/SearchZip/action\";\r\nimport { ClearZip } from \"../../store/SearchZip/action\";\r\nimport CurrentMed from \"../../store/currentMed/action\";\r\nimport AutoSuggestInput from '../../components/AutoSuggestInput';\r\nimport {\r\n  HeaderLogoImage,\r\n  LocationIconSvg,\r\n  SearchIconSvg,\r\n} from \"../../assets/images\";\r\nimport \"../../assets/pages/search.scss\";\r\n\r\nexport const SearchPage: React.FC = () => {\r\n  const history = useHistory();\r\n  const state = useSelector((state:any) => state.topMedReducer.top);\r\n  const grouping = useSelector((state:any) => state.topMedReducer.group)\r\n  const [group,setGroup] = useState(false);\r\n  const zip = useSelector((zip:any) => zip.zipReducer);\r\n  const data = useSelector((state:any) => state.currentReducer);\r\n  const [cookies, setCookies] = useCookies();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [error,setError] = useState(false);\r\n  const [zipError,setZipError] = useState(false);\r\n  const [codes, setCodes] = useState(\"\");\r\n  const [groups,setGroups] = useState([]);\r\n  const [filteredItems,setFilteredItems] = useState([]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    \r\n    dispatch(TopMed({authorization: `Bearer ${cookies['token']}`, 'x-account-id':cookies['account']}));\r\n    \r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if(codes){\r\n      dispatch(SearchZip(codes));\r\n    }\r\n    \r\n    return () => {dispatch(ClearZip())}\r\n    \r\n  },[codes,dispatch]);\r\n  useEffect(() => {\r\n    if(data.name){\r\n        history.push({\r\n        pathname:\"/results\",\r\n        state:{\r\n          name: search,\r\n          location: zip.filter((item:any) => item.label === codes),\r\n        }\r\n      })\r\n    }\r\n  }, [data]);\r\n  const submitAction = () => {\r\n    if(search && codes && state.filter((item:any) => item.label === search || item.label.label === search)[0]){\r\n      dispatch(CurrentMed(search,{authorization: `Bearer ${cookies['token']}`, 'x-account-id':cookies['account']}))\r\n      return true;\r\n    }else{\r\n      codes ? setZipError(false) :setZipError(true);\r\n      search && state.filter((item:any) => item.label.label === search)[0] ? setError(false) : setError(true);\r\n      return false;\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"search-page\">\r\n      <div>\r\n        <div className=\"search-page__header\">\r\n          <img\r\n            src={HeaderLogoImage}\r\n            className=\"search-page__header-logo\"\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n        <div className=\"search-page__content\">\r\n          <h1 className=\"search-page__title\">\r\n            Save on your medications today!\r\n          </h1>\r\n\r\n          <div className=\"search-page__input-wrapper\">\r\n          <InputField\r\n              iconUrl={SearchIconSvg}\r\n              value={search}\r\n              placeholder=\"Search Medications\"\r\n              onChange={setSearch}\r\n              onSubmit={submitAction}\r\n              buttonText=\"Find lowest prices\"\r\n              autocomplete={search.length >= 3 && group === false ? state : []}\r\n              errorHandle={error}\r\n              grouping={true}\r\n              filtered={filteredItems}\r\n              setFiltered={setFilteredItems}\r\n              // error=\"Please type correct medication\"\r\n            />\r\n            {error ? (\r\n              <p className=\"error_message\">Please choose correct medication</p>\r\n            ) : (\r\n              <p></p>\r\n            )}\r\n            <InputField\r\n              iconUrl={LocationIconSvg}\r\n              value={codes}\r\n              placeholder=\"ZIP (enter at least 3 characters)\"\r\n              onChange={setCodes}\r\n              onSubmit={submitAction}\r\n              buttonText=\"Find lowest prices\"\r\n              autocomplete={zip}\r\n              errorHandle={zipError}\r\n              haveSubmit\r\n              // error=\"Please type correct ZIP code\"\r\n            />\r\n            {zipError ? (\r\n              <p className=\"error_message\">Please choose correct Zip code</p>\r\n            ) : (\r\n              <p></p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPage;\r\n"
        }
    ]
}